<wxs src="./index.wxs" module="utils" />

<nav nav-type="title" title-text="AI助手"></nav>
<scroll-view
  class="message-list"
  scroll-y
  refresher-enabled
  refresher-triggered="{{ loading }}"
  bindrefresherrefresh="getMessageList"
>
  <view 
    wx:for="{{ messageList }}"
    wx:key="index"
    class="message-item"
    hover-class="message-item-hover"
    bindtap="toChat"
    data-user-id="{{ item.userId }}"
  >
    <!-- 头像 -->
    <image class="avatar" src="{{ item.avatar || '/static/ai/default-ai.png' }}" />
    
    <!-- 内容区域 -->
    <view class="content">
      <view class="name">{{ item.name }}</view>
      <view class="description">{{ item.lastMessage }}</view>
    </view>
    
    <!-- 未读消息数 -->
    <view wx:if="{{ item.unreadCount > 0 }}" class="unread-badge">
      {{ item.unreadCount > 99 ? '99+' : item.unreadCount }}
    </view>
  </view>
</scroll-view>
